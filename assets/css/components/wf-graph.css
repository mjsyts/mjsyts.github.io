/*
  Waveform graph figure styles.
  - Designed to inherit shared applet theme (panel/surface/btn typography)
  - Includes safe fallbacks so it still renders nicely if used outside theme context
*/

.wf {
  /* keep spacing consistent even if included inline in prose */
  margin: 0.75rem 0 1.1rem;
}

/* Ensure expected stacking even if theme changes */
.wf .app-main {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Toggle row should wrap nicely */
.wf__toggles {
  gap: 0.5rem;
}

/* Surface should clip rounded corners */
.wf__surface {
  overflow: hidden;
}

/* -----------------------
   Toggle buttons + dots
   ----------------------- */
.wf__btn {
  position: relative;
}

/* Colored dots */
.wf__btn::before {
  content: "";
  display: inline-block;
  width: 0.65rem;
  height: 0.65rem;
  border-radius: 999px;
  margin-right: 0.5rem;
  vertical-align: middle;
  background: var(--dot, var(--accent, rgba(45, 92, 140, 1)));
  opacity: 0.9;
}

/* Off state: subtle dim */
.wf__btn:not(.is-on)::before { opacity: 0.22; }
.wf__btn:not(.is-on) { opacity: 0.82; }

/* Optional: slight emphasis for active toggles */
.wf__btn.is-on {
  box-shadow: 0 0 0 2px rgba(0,0,0,0.03) inset;
}

/* Accessibility: keep focus visible even if theme changes */
.wf__btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(45, 92, 140, 0.18);
}

/* -----------------------
   SVG sizing / layout
   ----------------------- */
.wf__svg {
  width: 100%;
  height: auto;
  display: block;
}

/* Background rect (if present) */
.wf__bg {
  fill: rgba(255,255,255,0.20);
  stroke: var(--border, rgba(17, 17, 17, 0.14));
  stroke-width: 1;
}

/* -----------------------
   Series drawing defaults
   ----------------------- */
.wf__series path {
  fill: none;
  stroke-width: 3;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.wf__series line {
  stroke-width: 2;
  stroke-dasharray: 5 5;
  opacity: 0.55;
}

/* -----------------------
   Palette mapping
   (expects your site palette vars already exist; provides safe fallbacks)
   ----------------------- */
.wf__series--phase  path,
.wf__series--phase  line { stroke: #4A4A4A; }

.wf__series--sine   path,
.wf__series--sine   line { stroke: var(--blue, #43A0BD); }

.wf__series--saw    path,
.wf__series--saw    line { stroke: var(--gold, #D4990D); }

.wf__series--square path,
.wf__series--square line { stroke: var(--coral, #DE8D74); }

.wf__series--tri    path,
.wf__series--tri    line { stroke: var(--green, #9FC353); }

/* Phase dashed reference (requested) */
.wf__series--phase path {
  stroke-dasharray: 7 7;
  stroke-width: 2.25;
  opacity: 0.95;
}

/* -----------------------
   Toggle behavior
   ----------------------- */
.wf__series.is-off {
  opacity: 0.12;
  pointer-events: none; /* optional: keeps hidden lines from catching events */
}

/* -----------------------
   Fallbacks if theme classes/vars aren't present
   (doesn't override your themeâ€”only helps if used standalone)
   ----------------------- */
.wf .panel,
.wf .surface {
  border-radius: var(--radius, 14px);
}

.wf .panel {
  border: 1px solid var(--border, rgba(17, 17, 17, 0.14));
  background: var(--panel, rgba(255, 255, 255, 0.72));
}

.wf .surface {
  border: 1px solid var(--border, rgba(17, 17, 17, 0.14));
  background: var(--panel, rgba(255, 255, 255, 0.72));
}

.wf .btn {
  font-family: var(--ui, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif);
}
